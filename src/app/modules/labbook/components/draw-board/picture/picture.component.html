<ng-container *ngIf="initialState">
  <ng-container *transloco="let t">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="element"
          errorTailor>
      <div class="header flex justify-between header-container" [id]="title_id">
        <div class="flex-fill">
          <eworkbench-form-input-pic
            [for]="'title-' + uniqueHash"
            [loading]="loading"
            [margin]="false"
          >
            <input
              [style]="this.background_color"
              type="text"
                  class="form-control ewb-input"
                  [id]="'title-' + uniqueHash"
                  formControlName="pic_title"
                  name="title"
                  [placeholder]="t('labBook.drawBoardPicture.details.title.placeholder')"
                  slot="input"
                  [readOnly]=!this.title_editable
                />
              </eworkbench-form-input-pic>
            </div>
            <div class="ml-2 self-center">
              <button type="button"
                      class="btn ewb-button-big ewb-button-background"
                      (click)="create_new_note_below()"
                      *ngIf="editable">
                NoteBelow
              </button>
              <button type="button"
                      class="btn ewb-button-big ewb-button-background"
                      (click)="create_new_note_aside()"
                      *ngIf="editable">
                NoteAside
              </button>
              <button type="button"
                      class="btn ewb-button-big ewb-button-background"
                      (click)="onOpenCommentsModal()"
                      *ngIf="editable">
                <joeseln-icon className="wb-comment"
                              class="mr-1"></joeseln-icon>
                <ng-container *ngIf="!element.num_related_comments">
                  {{ t('labBook.drawBoard.element.footer.createComment') }}
                </ng-container>
                <ng-container
                  *ngIf="element.num_related_comments && element.num_related_comments === 1">
                  {{ t('labBook.drawBoard.element.footer.comment', {count: element.num_related_comments}) }}
                </ng-container>
                <ng-container
                  *ngIf="element.num_related_comments && element.num_related_comments > 1">
                  {{ t('labBook.drawBoard.element.footer.comments', {count: element.num_related_comments}) }}
                </ng-container>
              </button>
              <button type="button"
                      class="btn ewb-button-big square-md ewb-button-none cursor-move drag-handle mr-2"
                      *ngIf="editable">
                <joeseln-icon className="wb-arrow-cross"></joeseln-icon>
              </button>
              <eworkbench-labbook-element-dropdown
                *ngIf="editable"
                [service]="picturesService"
                [id]="initialState.pk"
                [labBookId]="id"
                [elementId]="element.pk"
                [section]="section"
                [initialState]="initialState"
                routerBaseLink="/pictures"
                [privileges]="privileges"
                [labBookEditable]="editable"
              ></eworkbench-labbook-element-dropdown>
            </div>
          </div>
      <div class="body">
        <!--        <eworkbench-lock [id]="element.child_object_id" [lock]="lock"-->
        <!--                         [lockUser]="lockUser"-->
        <!--                         [service]="picturesService"></eworkbench-lock>-->
        <a href (click)="onOpenPictureEditorModal($event)"
        ><img class="max-w-full h-auto"
              [src]="initialState.download_rendered_image"
              [alt]="initialState.display"
        /></a>
      </div>
      <!--      <div class="footer">-->
      <!--        <div>-->
      <!--          {{ t('labBook.drawBoard.element.footer.lastModifiedBy') }}-->
      <!--          <eworkbench-user-details-->
      <!--            [user]="element.child_object.last_modified_by"-->
      <!--            class="last-modified-by"></eworkbench-user-details>-->
      <!--          {{ t('labBook.drawBoard.element.footer.lastModifiedAt.at') }}-->
      <!--          {{ element.child_object.last_modified_at | formatDate }}-->
      <!--        </div>-->
      <!--        <div class="actions">-->
      <!--          &lt;!&ndash;          <a [routerLink]="['/pictures', element.child_object_id]" target="_blank">&ndash;&gt;-->
      <!--          &lt;!&ndash;            <button type="button" class="btn ewb-button-big ewb-button-background mr-2">&ndash;&gt;-->
      <!--          &lt;!&ndash;              <joeseln-icon className="wb-link" class="mr-1"></joeseln-icon>&ndash;&gt;-->
      <!--          &lt;!&ndash;              <ng-container *ngIf="!element.num_relations">&ndash;&gt;-->
      <!--          &lt;!&ndash;                {{ t('labBook.drawBoard.element.footer.linkWith') }}&ndash;&gt;-->
      <!--          &lt;!&ndash;              </ng-container>&ndash;&gt;-->
      <!--          &lt;!&ndash;              <ng-container *ngIf="element.num_relations && element.num_relations === 1">&ndash;&gt;-->
      <!--          &lt;!&ndash;                {{ t('labBook.drawBoard.element.footer.link', {count: element.num_relations}) }}&ndash;&gt;-->
      <!--          &lt;!&ndash;              </ng-container>&ndash;&gt;-->
      <!--          &lt;!&ndash;              <ng-container *ngIf="element.num_relations && element.num_relations > 1">&ndash;&gt;-->
      <!--          &lt;!&ndash;                {{ t('labBook.drawBoard.element.footer.links', {count: element.num_relations}) }}&ndash;&gt;-->
      <!--          &lt;!&ndash;              </ng-container>&ndash;&gt;-->
      <!--          &lt;!&ndash;            </button>&ndash;&gt;-->
      <!--          &lt;!&ndash;          </a>&ndash;&gt;-->
      <!--          <button type="button" class="btn ewb-button-big ewb-button-background"-->
      <!--                  (click)="create_new_note_below()">-->
      <!--            NoteBelow-->
      <!--          </button>-->
      <!--          <button type="button" class="btn ewb-button-big ewb-button-background"-->
      <!--                  (click)="create_new_note_aside()">-->
      <!--            NoteAside-->
      <!--          </button>-->
      <!--          <button type="button" class="btn ewb-button-big ewb-button-background"-->
      <!--                  (click)="onOpenCommentsModal()">-->
      <!--            <joeseln-icon className="wb-comment"-->
      <!--                          class="mr-1"></joeseln-icon>-->
      <!--            <ng-container *ngIf="!element.num_related_comments">-->
      <!--              {{ t('labBook.drawBoard.element.footer.createComment') }}-->
      <!--            </ng-container>-->
      <!--            <ng-container-->
      <!--              *ngIf="element.num_related_comments && element.num_related_comments === 1">-->
      <!--              {{ t('labBook.drawBoard.element.footer.comment', {count: element.num_related_comments}) }}-->
      <!--            </ng-container>-->
      <!--            <ng-container-->
      <!--              *ngIf="element.num_related_comments && element.num_related_comments > 1">-->
      <!--              {{ t('labBook.drawBoard.element.footer.comments', {count: element.num_related_comments}) }}-->
      <!--            </ng-container>-->
      <!--          </button>-->
      <!--        </div>-->
      <!--      </div>-->
    </form>
  </ng-container>
</ng-container>
