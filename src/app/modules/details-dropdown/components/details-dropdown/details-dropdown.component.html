<ng-container *transloco="let t">
  <div *ngIf="dropdown" class="inline-block h-full navbar-nav" dropdown container="body" placement="bottom right">
    <button
      type="button"
      id="details-dropdown-button"
      class="btn mlzeln-button-big mlzeln-button-background square-md"
      aria-controls="details-dropdown-button"
      [disabled]="loading"
      dropdownToggle
    >
      <joeseln-icon className="wb-more-vertical"></joeseln-icon>
    </button>
    <ul
      id="details-dropdown-menu"
      *dropdownMenu
      class="dropdown-menu dropdown-menu-right details-dropdown-menu"
      role="menu"
      aria-labelledby="details-dropdown-menu"
    >
      <ng-template
        *ngTemplateOutlet="
          dropdownUL;
          context: {
            t: t,
            menuClass: '',
            itemClass: 'btn mlzeln-button-regular font-weight-normal w-100 text-left menu-item-button'
          }
        "
      ></ng-template>
    </ul>
  </div>
  <div *ngIf="!dropdown" class="inline-block w-full navbar-nav">
    <button
      type="button"
      class="btn mlzeln-button-big mlzeln-button-background square-md"
      [attr.aria-expanded]="!detailsCollapsed"
      aria-controls="details-dropdown-button"
      (click)="detailsCollapsed = !detailsCollapsed"
    >
      <joeseln-icon className="wb-more-vertical"></joeseln-icon>
    </button>
    <div class="collapse navbar-collapse mt-1 py-2 bg-white" [collapse]="detailsCollapsed">
      <ng-template
        *ngTemplateOutlet="
          dropdownUL;
          context: {
            t: t,
            menuClass: 'menuitem',
            itemClass: 'btn mlzeln-button-regular font-weight-normal w-100 text-left menu-item-button'
          }
        "
      ></ng-template>
    </div>
  </div>
</ng-container>

<ng-template #dropdownUL let-t="t" let-menuClass="menuClass" let-itemClass="itemClass">

<!--  <li [class]="menuClass" role="menuitem" *ngIf="privilegesElement">-->
<!--    <button type="button" [class]="itemClass" (click)="onOpenPrivilegesModal()" [disabled]="loading">-->
<!--      <joeseln-icon className="wb-unlock"></joeseln-icon> {{ t('detailsDropdown.privileges') }}-->
<!--    </button>-->
<!--  </li>-->

  <li [class]="menuClass" role="menuitem" *ngIf="exportElement">
    <button type="button" [class]="itemClass" (click)="onExport()" [disabled]="loading">
      <joeseln-icon className="wb-pdf-file"></joeseln-icon> {{ t('detailsDropdown.export') }}
    </button>
  </li>

  <li [class]="menuClass" role="menuitem" *ngIf="is_labbook">
    <button type="button" [class]="itemClass" (click)="onExportZip()"
            [disabled]="loading">
      <joeseln-icon className="wb-pdf-file"></joeseln-icon>
      {{ ('Export as Zip') }}
    </button>
  </li>

<!--  <li [class]="menuClass" role="menuitem" *ngIf="privileges?.trash && !initialState?.deleted && trashElement">-->
<!--    <button type="button" [class]="itemClass" (click)="onDelete()" [disabled]="loading">-->
<!--      <joeseln-icon className="wb-trash-1"></joeseln-icon> {{ t('detailsDropdown.trash') }}-->
<!--    </button>-->
<!--  </li>-->
  <li [class]="menuClass" role="menuitem" *ngIf="privileges?.restore && initialState?.deleted">
    <button type="button" [class]="itemClass" (click)="onRestore()" [disabled]="loading">
      <joeseln-icon className="wb-undo"></joeseln-icon> {{ t('detailsDropdown.restore') }}
    </button>
  </li>
<!--  <li [class]="menuClass" role="menuitem" *ngIf="newModalComponent && duplicateElement">-->
<!--    <button type="button" [class]="itemClass" (click)="onOpenDuplicateModal()" [disabled]="loading">-->
<!--      <joeseln-icon className="wb-copy"></joeseln-icon> {{ t('detailsDropdown.duplicate') }}-->
<!--    </button>-->
<!--  </li>-->
  <li [class]="menuClass" role="menuitem" *ngIf="shareElement">
    <button type="button" [class]="itemClass" (click)="onOpenShareModal()" [disabled]="loading">
      <joeseln-icon className="wb-share"></joeseln-icon> {{ t('detailsDropdown.share') }}
    </button>
  </li>
</ng-template>
