<ng-container *transloco="let t">
  <main>
    <div *ngIf="user">
      <h4>Welcome {{user.username}}</h4>
      <div>
        Username: &nbsp; {{user.username}} <br>
        Mail: &nbsp; {{ user.email }}  <br>
        Admin: &nbsp; {{ user.admin}}
      </div>
      <div style="margin-top: 1%" *ngIf="!user.admin">
        <h6>Your groups:</h6>
        <ul *ngIf="user.groups">
          <li *ngFor="let group of user.groups">
            {{group}}
          </li>
        </ul>
      </div>
      <div style="margin-top: 1%" *ngIf="!user.admin">
        <h6>Your groups as groupadmin:</h6>
        <ul *ngIf="user.admin_groups">
          <li *ngFor="let group of user.admin_groups">
            {{group}}
          </li>
        </ul>
      </div>
    </div>
    <div *ngIf="user && !user.oidc_user">
      <h5>Password Reset</h5>
      <div *ngIf="user">
        <div>Password must contain at least one lowercase letter, one uppercase
          letter, one digit, one special character, and must be between eight
          and sixteen characters in length.
        </div>
        <form [formGroup]="form" (ngSubmit)="onSubmit()" errorTailor
              *ngIf="!user.oidc_user">
          <div class="mb-4">
            <label for="password">
              {{ t('changePassword.newPassword') }}
              <mlzeln-form-asterisk
                class="inline-block"></mlzeln-form-asterisk>
            </label>
            <input
              type="password"
              class="form-control mlzeln-input"
              id="password"
              formControlName="password"
              name="password"
              [placeholder]="t('changePassword.newPassword')"
            />
          </div>
          <div class="mb-4">
            <label for="passwordConfirm">
              {{ t('changePassword.confirmNewPassword') }}
              <mlzeln-form-asterisk
                class="inline-block"></mlzeln-form-asterisk>
            </label>
            <input
              type="password"
              class="form-control mlzeln-input"
              id="passwordConfirm"
              formControlName="passwordConfirm"
              name="passwordConfirm"
              [placeholder]="t('changePassword.confirmNewPassword')"
            />
          </div>
          <button type="submit" class="btn mlzeln-button-big mlzeln-button-primary"
                  [disabled]="loading || form.invalid">
            {{ t('changePassword.confirm') }}
          </button>
        </form>
      </div>
    </div>
  </main>
</ng-container>
